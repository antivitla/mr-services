<meta charset="utf-8">
<script src="../node_modules/autosize/dist/autosize.js"></script>
<body style="font-size: 18px; font-family: Sitka Text; line-height: 1.5;">
  <textarea id="mynote" onkeydown="return checkSave(event, this)" style="width: 100%; max-width: 40em; min-height: 9em; font-family: inherit; line-height: inherit; font-size: inherit; padding: 1em;"></textarea>
  <textarea id="myanothernote" onkeydown="return checkSave(event, this)" style="width: 100%; max-width: 40em; min-height: 9em; font-family: inherit; line-height: inherit; font-size: inherit; padding: 1em;"></textarea>

  <textarea id="thirdnote" onkeydown="return checkSave(event, this)" style="width: 100%; max-width: 40em; min-height: 9em; font-family: inherit; line-height: inherit; font-size: inherit; padding: 1em;"></textarea>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      Array.prototype.forEach.call(document.querySelectorAll("textarea"), function (textarea) {
        init(textarea);
      });
    });

    function init (textarea) {
      try {
        window[textarea.id].value = JSON.parse(localStorage[textarea.id]);
      } catch (error) {
        window[textarea.id].value = "";
      }
      autosize(window[textarea.id]);
      window[textarea.id].focus();
    }

    function checkSave (event, textarea) {
      if (event.keyCode == 83 && event.ctrlKey) {
        localStorage[textarea.id] = JSON.stringify(textarea.value);
        textarea.blur()
        return false;
      }
    }
  </script>
</body>
